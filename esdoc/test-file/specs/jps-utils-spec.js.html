<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <base data-ice="baseUrl" href="../../">
  <title data-ice="title">specs/jps-utils-spec.js | Passbook Manager API Document</title>
  <link type="text/css" rel="stylesheet" href="css/style.css">
  <link type="text/css" rel="stylesheet" href="css/prettify-tomorrow.css">
  <script src="script/prettify/prettify.js"></script>
  
  
  <script src="script/manual.js"></script>
</head>
<body class="layout-container" data-ice="rootContainer">

<header>
  <a href="./">Home</a>
  <a href="./manual/index.html" data-ice="manualHeaderLink">Manual</a>
  <a href="identifiers.html">Reference</a>
  <a href="source.html">Source</a>
  <a href="test.html" data-ice="testLink">Test</a>
  
  <div class="search-box">
  <span>
    <img src="./image/search.png">
    <span class="search-input-edge"></span><input class="search-input"><span class="search-input-edge"></span>
  </span>
    <ul class="search-result"></ul>
  </div>
</header>

<nav class="navigation" data-ice="nav"><div>
  <ul>
    
  </ul>
</div>
</nav>

<div class="content" data-ice="content"><h1 data-ice="title">specs/jps-utils-spec.js</h1>
<pre class="source-code line-number raw-source-code"><code class="prettyprint linenums" data-ice="content">&apos;use strict&apos;;
const assert = require(&apos;assert&apos;);
const _ = require(&apos;lodash&apos;);
const child_process = require(&apos;child_process&apos;);
const path = require(&apos;path&apos;);
const utils = require(path.resolve(__dirname, &apos;../../lib/utils&apos;));
const mocks = require(path.resolve(__dirname, &apos;../helpers/mocks&apos;));
const program = mocks.program;
const config = program.config.defaults;
const Passbook = require(path.resolve(__dirname, &apos;../../lib/jps-passbook&apos;));
const cert_url = path.resolve(__dirname, &apos;../../certificates/pass.p12&apos;);
const cert_pass = &apos;fred&apos;;
const jpsPassbook = new Passbook(program);

describe(&apos;Utils&apos;, function(done) {
	this.timeout(20000);
	it(&apos;should be defined&apos;, function(done) {
		assert(utils);
		done();
	});

	it(&apos;should return Github Pass&apos;, function(done) {
		this.slow(5000);
		utils.githubToPass(&apos;jonniespratley&apos;, function(err, user) {
			assert(user);
			done();
		});
	});

	it(&apos;should create Github Pass&apos;, function(done) {
		const GITHUB_USERS = [ /*&apos;sindresorhus&apos;, &apos;eddiemonge&apos;, &apos;addyosmani&apos;, */ &apos;jonniespratley&apos;];
		var _done = _.after(GITHUB_USERS.length, function() {
			done();
		});
		_.forEach(GITHUB_USERS, function(n) {
			utils.githubToPass(n, function(err, res) {
				assert(res.pass, &apos;has pass&apos;);
				assert(res.user, &apos;has user&apos;);
				jpsPassbook.createPass(res.pass, function(err, resp) {
					assert(resp, &apos;has response&apos;);
					_done();
				});
			});
		});
	});

	it(&apos;checksum() - should create a checksum hash&apos;, function(done) {
		var hash1 = utils.checksum(&apos;This is my test text&apos;);
		var hash1_expected = &apos;e53815e8c095e270c6560be1bb76a65d&apos;;
		var hash2_expected = &apos;cd5855be428295a3cc1793d6e80ce47562d23def&apos;;
		var hash2 = utils.checksum(&apos;This is my test text&apos;, &apos;sha1&apos;);
		assert(hash1 === hash1_expected);
		assert(hash2 === hash2_expected);
		done();
	});
});
</code></pre>

</div>

<footer class="footer">
  Generated by <a href="https://esdoc.org">ESDoc<span data-ice="esdocVersion">(0.4.3)</span></a>
</footer>

<script src="script/search_index.js"></script>
<script src="script/search.js"></script>
<script src="script/pretty-print.js"></script>
<script src="script/inherited-summary.js"></script>
<script src="script/test-summary.js"></script>
<script src="script/inner-link.js"></script>
<script src="script/patch-for-local.js"></script>
</body>
</html>
