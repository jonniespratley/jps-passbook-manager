<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <base data-ice="baseUrl">
  <title data-ice="title">Passbook Manager API Document</title>
  <link type="text/css" rel="stylesheet" href="css/style.css">
  <link type="text/css" rel="stylesheet" href="css/prettify-tomorrow.css">
  <script src="script/prettify/prettify.js"></script>
  
  
  <script src="script/manual.js"></script>
</head>
<body class="layout-container" data-ice="rootContainer">

<header>
  <a href="./">Home</a>
  <a href="./manual/index.html" data-ice="manualHeaderLink">Manual</a>
  <a href="identifiers.html">Reference</a>
  <a href="source.html">Source</a>
  <a href="test.html" data-ice="testLink">Test</a>
  
  <div class="search-box">
  <span>
    <img src="./image/search.png">
    <span class="search-input-edge"></span><input class="search-input"><span class="search-input-edge"></span>
  </span>
    <ul class="search-result"></ul>
  </div>
</header>

<nav class="navigation" data-ice="nav"><div>
  <ul>
    
  </ul>
</div>
</nav>

<div class="content" data-ice="content"><div data-ice="index" class="github-markdown"><h1 id="pass-manager">Pass Manager</h1>
<p>This is a simple web app for creating and managing Apple Wallet passes.</p>
<p><a href="https://coveralls.io/github/jonniespratley/jps-passbook-manager?branch=develop"><img src="https://coveralls.io/repos/jonniespratley/jps-passbook-manager/badge.svg?branch=develop&amp;service=github" alt="Coverage Status"></a></p>
<p><a href="https://travis-ci.org/jonniespratley/jps-passbook-manager"><img src="https://travis-ci.org/jonniespratley/jps-passbook-manager.svg?branch=develop" alt="Build Status"></a></p>
<p><a href="https://doclets.io/jonniespratley/jps-passbook-manager/develop"><img src="https://doclets.io/jonniespratley/jps-passbook-manager/develop.svg" alt="API Doc"></a></p>
<h2 id="getting-started">Getting Started</h2>
<p>This is a simple web app for creating and managing Apple Wallet passes.</p>
<h3 id="1-fork-it">1. Fork It</h3>
<p>Clone or fork this repo.</p>
<pre><code><code class="source-code prettyprint">$ git clone https://github.com/jonniespratley/jps-passbook-manager.git</code>
</code></pre><h3 id="2-install">2. Install</h3>
<p>You must install the dependencies.</p>
<pre><code><code class="source-code prettyprint">$ npm install</code>
</code></pre><h3 id="3-start">3. Start</h3>
<p>Then start the server.</p>
<pre><code><code class="source-code prettyprint">$ npm start</code>
</code></pre><blockquote>
<p>Open your browser to localhost:[config.port]</p>
</blockquote>
<h2 id="release-history">Release History</h2>
<p><em>(Nothing yet)</em></p>
<hr>
<h2 id="how-to">How To</h2>
<ol>
<li><h3 id="create-pass-type-id-certificate">Create Pass Type ID Certificate</h3>
<p>To create a Pass Type ID. Visit the link below and follow the screenshots.</p>
<blockquote>
<p><a href="https://developer.apple.com/account/ios/identifiers/passTypeId/passTypeIdList.action">https://developer.apple.com/account/ios/identifiers/passTypeId/passTypeIdList.action</a></p>
</blockquote>
<p> <img src="https://dl.dropboxusercontent.com/u/26906414/jps-passbook-manager/step-1.png" alt="image">
 <img src="https://dl.dropboxusercontent.com/u/26906414/jps-passbook-manager/step-2.png" alt="image">
 <img src="https://dl.dropboxusercontent.com/u/26906414/jps-passbook-manager/step-3.png" alt="image">
 <img src="https://dl.dropboxusercontent.com/u/26906414/jps-passbook-manager/step-4.png" alt="image"></p>
</li>
<li><h3 id="export-cert-to-disk">Export .cert to disk</h3>
<p>Launch the Keychain Access utility. -From the menu, select Keychain Access | Certificate Assistant | Request a Certificate from a Certificate Authority. 
In the Certificate Information window, enter the following:    </p>
<ul>
<li>User Email Address: Enter the e-mail address associated with your iOS developer account.</li>
<li>Common Name: Choose a name that relates to the Pass Type ID.</li>
<li>CA Email Address: Leave this field blank</li>
<li>Request is: Choose Saved to Disk</li>
</ul>
</li>
<li><h3 id="creating-a-pass">Creating a pass</h3>
<p>To create a pass open the terminal and execute the following command:</p>
</li>
<li><h3 id="validating-a-pass">Validating a pass</h3>
<p>To validate a pass open the terminal and execute the following command:</p>
</li>
<li><h3 id="signing-a-pass">Signing a pass</h3>
<p>To sign a pass open the terminal and execute the following command:</p>
<pre><code><code class="source-code prettyprint">  openssl smime -binary -sign \
      -certfile /Users/jps/Github/jps-passbook-manager/certificates/wwdr-authority.pem \
      -signer /Users/jps/Github/jps-passbook-manager/certificates/pass-cert.pem \
      -inkey /Users/jps/Github/jps-passbook-manager/certificates/pass-key.pem \
      -in /var/folders/pw/y2bdztx93jl73s811y60dtx40000gn/T/mock-coupon.raw/manifest.json \
      -out /var/folders/pw/y2bdztx93jl73s811y60dtx40000gn/T/signature \
      -outform DER \
      -password pass:fred</code>
</code></pre></li>
<li><h3 id="distributing-a-pass">Distributing a pass</h3>
<p>Use the following Terminal commands to generate a certificate file and a key.pem file.</p>
</li>
</ol>
<blockquote>
<p><a href="https://developer.apple.com/library/ios/documentation/UserExperience/Conceptual/PassKit_PG/Creating.html#//apple_ref/doc/uid/TP40012195-CH4-SW55">https://developer.apple.com/library/ios/documentation/UserExperience/Conceptual/PassKit_PG/Creating.html#//apple_ref/doc/uid/TP40012195-CH4-SW55</a></p>
</blockquote>
<pre><code><code class="source-code prettyprint">```
openssl pkcs12 -in pass.p12 -clcerts -nokeys -out pass-certificate.pem -password pass:fred
openssl pkcs12 -in pass.p12 -nocerts -out pass-key.pem

open sslsmime -binary -sign -certfile wwdr.pem -signer pass-cert.pem -inkey pass-key.pem -in manifest.json -out signature -outform DER -passin pass:fred
```</code>
</code></pre><ul>
<li><h3 id="create-signing-certificates">Create Signing Certificates</h3>
<pre><code><code class="source-code prettyprint">  $ openssl pkcs12 -in certificates/pass.p12 -password pass:fred -clcerts -nokeys -out certificates/pass-cert.pem</code>
</code></pre><pre><code><code class="source-code prettyprint">  $ openssl pkcs12 -in certificates/pass.p12 -password pass:fred -nocerts -out certificates/pass-key.pem</code>
</code></pre><pre><code><code class="source-code prettyprint">  $ openssl pkcs12 -in cert.p12 -clcerts -nokeys -out certificate.pem

  $ openssl pkcs12 -in cert.p12 -nocerts -out key.pem

  $ openssl smime -sign \
                -detach \
                -in manifest.json \
                -out ./signature \
                -outform DER \
                -inkey ./certificates/pass-passbookmanager-key.p12 \
                -signer ./certificates/AppleWWDRCA.cer</code>
</code></pre></li>
</ul>
</div>
</div>

<footer class="footer">
  Generated by <a href="https://esdoc.org">ESDoc<span data-ice="esdocVersion">(0.4.3)</span></a>
</footer>

<script src="script/search_index.js"></script>
<script src="script/search.js"></script>
<script src="script/pretty-print.js"></script>
<script src="script/inherited-summary.js"></script>
<script src="script/test-summary.js"></script>
<script src="script/inner-link.js"></script>
<script src="script/patch-for-local.js"></script>
</body>
</html>
