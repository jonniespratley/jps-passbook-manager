"use strict";var jpsPassbookManagerApp=angular.module("jpsPassbookManagerApp",["ngRoute","ngAnimate","ngResource","ui.ace","mgcrea.ngStrap"]).factory("App",function(a,b,c,d,e){a.location=e;var f=b;a.passTypes=[{value:"generic",name:"Generic"},{value:"boardingPass",name:"Boarding Pass"},{value:"coupon",name:"Coupon"},{value:"eventTicket",name:"Event Ticket"},{value:"storeCard",name:"Store Card"}];var g={http:c,debug:!0,db:f,api:b,title:"Pass Manager",description:"With this interface you can easily manage Apple Wallet Passes.",icon:"edit",hero:{title:"Easy Passes",body:"With this interface you can easily create Apple iOS Passbook Passes."},passTypes:a.passTypes,session:{user:{_id:"user-jonniespratley",provider:"",id:"",displayName:"",username:"jonniespratley",password:"",name:{familyName:"",givenName:"",middleName:""},emails:[{value:"",type:""}],photos:[],passTypeIdentifiers:[],data:null,_key:"user-jonniespratley"}},menu:[{id:null,slug:"home",title:"Home",icon:"home",href:"#/home"},{id:null,slug:"manage",title:"Manage",icon:"edit",href:"#/manage"},{id:null,slug:"passes",title:"Passes",icon:"tags",href:"#/passes"}],alerts:[],alert:function(b,c){$scope.$apply(function(){a.App.alert={type:b,body:c}})},hideModals:function(){$(".modal").modal("hide"),$(".modal-backdrop").remove()},savePass:function(a){var b=this;a=a||{},console.log("savePass",a),a._id?f.put(a).then(function(a){console.log("response",a),$scope.pass=a.data,b.hideModals(),e.path("/passes")})["catch"](function(a){console.error("savePass",a)}):f.post(a).then(function(a){console.log("createPass",a),b.hideModals(),e.path("/passes/"+a.data._id)})["catch"](function(a){console.error("db.post",a),alert("Error while creating pass")})}};return g}).controller("AppCtrl",function(a,b,c,d){b.App=c}).config(["$routeProvider",function(a){var b={delay:function(a,b){var c=a.defer();return b(c.resolve,0),c.promise}};a.when("/",{templateUrl:"./views/main.html",controller:"MainCtrl",resolve:b}).when("/manage",{templateUrl:"./views/manage.html",controller:"ManageCtrl",resolve:{user:function(a){return a.session.user}}}).when("/passes",{templateUrl:"./views/passes.html",controller:"PassesCtrl",resolve:{passes:function(a){return a.request({method:"GET",url:"/api/v1/admin/find?docType=pass"}).then(function(a){return a.data})}}}).when("/passes/:id",{templateUrl:"./views/pass_details.html",controller:"DetailCtrl",resolve:{pass:function(a,b){return a.current.params?b.get(a.current.params.id).then(function(a){return a.data}):void 0}}}).when("/docs",{templateUrl:"./views/docs.html",controller:"DocsCtrl",resolve:b}).when("/server",{templateUrl:"./views/server.html",controller:"ServerCtrl",resolve:{logs:function(a){return a.request({method:"GET",url:"/api/v1/admin/find?docType=log"}).then(function(a){return a.data})},devices:function(a){return a.request({method:"GET",url:"/api/v1/admin/find?docType=device"}).then(function(a){return a.data})},registrations:function(a){return a.request({method:"GET",url:"/api/v1/admin/find?docType=registration"}).then(function(a){return a.data},function(){return[]})}}}).otherwise({redirectTo:"/"})}]);jpsPassbookManagerApp.config(["$provide",function(a){return a.decorator("$rootScope",["$delegate",function(a){return a.safeApply=function(b){var c=a.$$phase;"$apply"===c||"$digest"===c?b&&"function"==typeof b&&b():a.$apply(b)},a}])}]),$(document).ready(function(){$(".collapse").collapse(),$(".scroll").click(function(a){a.preventDefault(),$("html,body").animate({scrollTop:$(this.hash).offset().top-50},"slow")}),$(document).find(".delete-btn").on("click",function(a){a.preventDefault();var b=confirm("DELETE: Are you sure?");return b?!0:void console.log(a)}),$(".page-header h1").bind("click",function(){$(this).next().slideToggle(200)}),$("legend").on("click",function(a){console.log(a),$(this).next().slideToggle(200)}),$(".toggle").bind("click",function(){$(this).next("div").slideToggle(200)}),console.log("document is ready")});