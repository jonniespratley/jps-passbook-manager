<form form class="form-horizontal" ng-submit="SmartPass.savePass(pass);">
	<tabs>
		<pane title="Details">
			<div id="pass-detailFields" class="well">
				<formitem title="Pass Type:">
					<select
					class="form-control"
					ng-model="pass.type"
					ng-change="SmartPass.loadSchema(t)"
					ng-options="t.name as t.title for t in SmartPass.types"></select>
				</formitem>
				<formitem title="Organization Name:">
					<input type="text" ng-model="pass.organizationName" class="form-control"/>
				</formitem>
				<formitem title="Logo Text:">
					<input type="text" ng-model="pass.logoText" class="form-control"/>
				</formitem>
				<formitem title="Description:">
					<textarea ng-model="pass.description" class="form-control"></textarea>
				</formitem>
			</div>

		</pane>
		<pane title="Front">
			Primary Fields <a class="label label-default" ng-click="pass[pass.type].primaryFields.push({})"> <i class="glyphicon glyphicon-plus"></i> </a>
			<div id="pass-primaryFields" class="well">
				<formitem title="Primary Field #{{$index}}:" ng-repeat="a in pass[pass.type].primaryFields">
					<div class="controls-row meta-row" >
						<input type="text" name="key" ng-model="a.key" class="form-control" placeholder="Key"/>
						<input type="text" name="label" ng-model="a.label" class="form-control" placeholder="Label"/>
						<input type="text" name="value" ng-model="a.value" class="form-control" placeholder="Value"/>
						<span class="help-inline"> <a class="label label-danger remove-row-btn" ng-click="pass[pass.type].primaryFields.splice($index, 1)"> <i class="glyphicon glyphicon-remove"></i> </a> </span>
						<br/>
					</div>
				</formitem>
			</div>

			<!-- @TODO: [Extra Fields] -->
			<legend>
				Extra Fields <a class="label label-default" ng-click="pass[pass.type].auxiliaryFields.push({})"> <i class="glyphicon glyphicon-plus"></i> </a>
			</legend>
			<div id="pass-extraFields" class="well">
				<formitem title="Extra Field #{{$index}}:" ng-repeat="a in pass[pass.type].auxiliaryFields">
					<div class="controls-row meta-row" >
						<input type="text" name="key" ng-model="a.key" class="col-sm-2" placeholder="Key"/>
						<input type="text" name="label" ng-model="a.label" class="col-sm-2" placeholder="Label"/>
						<input type="text" name="value" ng-model="a.value" class="col-sm-2" placeholder="Value"/>
						<span class="help-inline"> <a class="label label-danger remove-row-btn" ng-click="pass[pass.type].auxiliaryFields.splice($index, 1)"> <i class="glyphicon glyphicon-remove"></i> </a> </span>
						<br/>
					</div>
				</formitem>
			</div>

		</pane>

		<pane title="Back">

			<!-- @TODO: [Back Fields] -->
			<legend>
				Back Fields <a class="label label-default" ng-click="pass[pass.type].backFields.push({})"> <i class="glyphicon glyphicon-plus"></i> </a>
			</legend>
			<div id="pass-backFields" class="well">
				<formitem title="Back Field #{{$index}}:" ng-repeat="a in pass[pass.type].backFields">
					<div class="controls-row meta-row">
						<input type="text" name="key" ng-model="a.key" class="col-sm-2" placeholder="Key"/>
						<input type="text" name="label" ng-model="a.label" class="col-sm-2" placeholder="Label"/>
						<textarea class="span4" name="value" ng-model="a.value">{{a.value}}</textarea>
						<span class="help-inline"> <a class="label label-danger remove-row-btn" ng-click="pass[pass.type].backFields.splice($index, 1)"> <i class="glyphicon glyphicon-remove"></i> </a> </span>
						&nbsp;
					</div>
				</formitem>
			</div>

		</pane>
		<pane title="Locations">
			<!-- @TODO: [Locations] -->
			<legend>
				Locations <a class="label label-default" ng-click="pass.locations.push({latitude: '37.6189722', longitude: '-122.3748889'})"> <i class="glyphicon glyphicon-plus"></i> </a>
			</legend>
			<div id="pass-locationFields" class="well">
				<formitem title="Location #{{$index}}:" ng-repeat="l in pass.locations">
					<div class="form-group" >
						<input type="text" name="latitude" ng-model="l.latitude" class="col-sm-3" placeholder="Latitude"/>
						<input type="text" name="longitude" ng-model="l.longitude" class="col-sm-3" placeholder="Longitude"/>
						<span class="help-inline"> <a class="label label-danger remove-row-btn" ng-click="pass.locations.splice($index, 1)"> <i class="glyphicon glyphicon-remove"></i> </a> </span>
						&nbsp;
					</div>
				</formitem>

			</div>

		</pane>
		<pane title="Barcode">
			<!-- @TODO: [Barcode Fields] -->
			<legend>
				Barcode
			</legend>

			<div id="pass-barcodeFields" class="well">
				<formitem title="Format:">
					<select ng-model="pass.barcode.format" ng-options="format.name for format in SmartPass.barcodes"></select>
				</formitem>
				<formitem title="Messsage:">
					<div class="form-group">
						<textarea class="form-control" ng-model="pass.barcode.message"></textarea>
					</div>
				</formitem>
				<formitem title="Image:">
					<div class="pass-qrcode-wrap">
						<div id="pass-qrcode"></div>
						<button type="button" ng-click="SmartPass.updatedQrcode(pass)" class="btn">
							<i class="icon-refresh"></i> Refresh
						</button>
					</div>
				</formitem>
				<formitem title="Encoding:">
					<input type="text" ng-model="pass.barcode.messageEncoding"/>
				</formitem>
			</div>

		</pane>
		<pane title="Style">

			<!-- @TODO: [Style Fields] -->
			<legend>
				Style
			</legend>
			<div id="pass-styleFields" class="well">
				<formitem title="Label Color:">
					<input type="text" ng-model="pass.labelColor" class="colorpicker" ng-colorpicker/>
				</formitem>

				<formitem title="Foreground Color:">
					<div class="input-group">
						<input type="text"
						ng-model="pass.foregroundColor"
						class="colorpicker"
						ng-colorpicker/>
						<span class="input-group-addon"><i></i></span>
					</div>

				</formitem>
				<formitem title="Background Color:">
					<input type="text"
					ng-model="pass.backgroundColor"
					ng-colorpicker
					class="colorpicker"/>
				</formitem>
				<formitem title="Icon:">
					<div id="PassIconDiv">
						<img id="pass_icon" alt="Pass Icon" src="http://placehold.it/72x72&text=icon.png"/>
					</div>
					<input name="data[Pass][icon]" id="PassIcon" value="" type="file" class="file-url-input">
				</formitem>
				<formitem title="Icon@2x:">
					<div id="PassIconDiv">
						<img id="pass_icon2x" alt="Pass Icon" src="http://placehold.it/150x150&text=icon@2x.png"/>
					</div>
					<input name="data[Pass][icon2x]" id="PassIcon2x" value="" type="file" class="file-url-input">
				</formitem>
			</div>

		</pane>
		<pane title="Identity">
			<!-- @TODO: [Identity Fields] -->
			<legend>
				Identity
			</legend>
			<div id="pass-identityFields" class="well">
				<formitem title="ID:">
					<input type="text" ng-model="pass._id" disabled="true" class="form-control"/>
				</formitem>
				<formitem title="Identifier:">
					<input type="text" ng-model="pass.passTypeIdentifier" class="form-control"/>
				</formitem>
				<formitem title="Serial Number:">
					<input type="text" ng-model="pass.serialNumber" class="form-control"/>
				</formitem>
				<formitem title="Team Identifier:">
					<input type="text" ng-model="pass.teamIdentifier" class="form-control"/>
				</formitem>
				<formitem title="Web Service URL:">
					<input type="text" ng-model="pass.webServiceURL" class="form-control"/>
				</formitem>
				<formitem title="Authentication Token:">
					<input type="text" ng-model="pass.authenticationToken" class="form-control"/>
				</formitem>
			</div>
		</pane>
	</tabs>

</form>
