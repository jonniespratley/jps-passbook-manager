<div class="row">
	<div class="col-sm-12">
		<ol class="breadcrumb">
			<li><a href="#/">Home</a></li>
			<li class="active">Server</li>
		</ol>



    <title>dnd binary upload</title>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <script type="text/javascript">
        function sendFile(file) {
            var uri = "/index.php";
            var xhr = new XMLHttpRequest();
            var fd = new FormData();

            xhr.open("POST", uri, true);
            xhr.onreadystatechange = function() {
                if (xhr.readyState == 4 && xhr.status == 200) {
                    // Handle response.
                    alert(xhr.responseText); // handle response.
                }
            };
            fd.append('myFile', file);
            // Initiate a multipart/form-data upload
            xhr.send(fd);
        }

        window.onload = function() {
            var dropzone = document.getElementById("dropzone");
            dropzone.ondragover = dropzone.ondragenter = function(event) {
                event.stopPropagation();
                event.preventDefault();
            }

            dropzone.ondrop = function(event) {
                event.stopPropagation();
                event.preventDefault();

                var filesArray = event.dataTransfer.files;
                for (var i=0; i<filesArray.length; i++) {
                    sendFile(filesArray[i]);
                }
            }
        }
    </script>

    <div>
        <div id="dropzone" style="margin:30px; width:500px; height:300px; border:1px dotted grey;">Drag & drop your file here...</div>
    </div>


		<tabs id="server-tabs">

			<pane title="Logs">
				<table id="logs-table" class="table table-condensed table-bordered">
					<thead>
					<th>
						ID
					</th>
					<th>
						Date
					</th>
					<th>
						Log
					</th>
					</thead>
					<tbody>
					<tr ng-repeat="item in logs track by $index | orderBy:_id:sort" id="{{item._id}}">
						<td>
							{{item._id}}
						</td>
						<td>
							{{item.created_at | date:'medium'}}
						</td>
						<td>
							<textarea class="form-control">{{item.data.logs.join('\n')}}</textarea>
						</td>
					</tr>
					</tbody>
				</table>
			</pane>



			<!-- TODO: Devices -->
			<pane title="Devices">
				<table id="devices-table" class="table table-condensed table-bordered">
					<thead>

					<th>deviceLibraryIdentifier</th>
					<th>Serial #</th>
					<th>Created</th>
					<th>Actions</th>
					</thead>
					<tbody>
					<tr
						ng-repeat="item in devices track by $index | orderBy:created_at:true"
						id="{{item._id}}">

						<td>{{item.deviceLibraryIdentifier}}</td>
						<td>{{item.serialNumber}}</td>
						<td>{{item.created_at}}</td>
						<td></td>
					</tr>
					</tbody>
				</table>
			</pane>



			<!-- TODO: registrations -->
			<pane title="Registrations">
				<table id="registrations-table" class="table table-condensed table-bordered">
					<thead>
					<th>ID</th>
					<th>Device</th>
					<th>Pass</th>
					<th>Created</th>
					<th>Actions</th>
					</thead>
					<tbody>
					<tr
						ng-repeat="item in registrations track by $index | orderBy:created_at:true"
						id="{{item._id}}">
						<td>{{item._id}}</td>
						<td>{{item.device}}</td>
						<td>{{item.pass}}</td>
						<td>{{item.created_at}}</td>
						<td></td>
					</tr>
					</tbody>
				</table>
			</pane>



		</tabs>





	</div>
</div>
